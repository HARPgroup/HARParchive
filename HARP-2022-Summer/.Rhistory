pre2 <- group2(DRpre_z)
library(dataRetrieval)
library(zoo)
library(IHA)
library(dplyr)
library(lubridate)
library(ggplot2)
#importing data for gauge 11465200
siteNo <- '11465200'
startDate_pre <- '1970-01-01'
endDate_pre <- '1980-12-31'
startDate_post <- '1985-01-01'
endDate_post <- '1995-12-31'
pCode <- '00060' #code for streamflow
sCode <- '00003' #average daily data
DRflow_pre <-readNWISdv(siteNo, pCode, startDate_pre, endDate_pre)
DRflow_post <-readNWISdv(siteNo, pCode, startDate_post, endDate_post)
head(DRflow_pre)
#renaming columns
colnames(DRflow_pre) <- c('Agency', 'Site', 'Date', 'Flow', 'Code')
colnames(DRflow_post) <- c('Agency', 'Site', 'Date', 'Flow', 'Code')
#plotting flow pre and post dam
par(mfrow=c(1,2)) #creates 2 windows side-by-side for the plots to be shown
plot(DRflow_pre$Date, DRflow_pre$Flow, type = 'l', col = 'red', ylim = c(0,20000))
plot(DRflow_post$Date, DRflow_post$Flow, type = 'l', col = 'blue', ylim = c(0,20000))
#----IHA parameter #1: Monthly Magnitude----------------------------------------------
#making tables into zoo objects for IHA package
DRpre_z <- zoo(DRflow_pre$Flow, order.by=DRflow_pre$Date)
DRpost_z <- zoo(DRflow_post$Flow, order.by=DRflow_post$Date)
Monthly_pre_mean <- as.data.frame(group1(DRpre_z, year = 'calendar', FUN = mean))
Monthly_post_mean <- as.data.frame(group1(DRpost_z, year = 'calendar', FUN = mean))
Monthly_pre_med <- as.data.frame(group1(DRpre_z, year = 'calendar', FUN = median))
Monthly_post_med <- as.data.frame(group1(DRpost_z, year = 'calendar', FUN = median))
head(Monthly_pre_mean) #previewing one of the resulting tables for monthly magnitude
#plotting monthly magnitude as mean
par(mfrow=c(1,2))
boxplot(Monthly_pre_mean, ylab = 'Monthly magnitude (cfs)', ylim = c(0,4000), main = 'Monthly mean pre-dam')
boxplot(Monthly_post_mean, ylab = 'Monthly magnitude (cfs)', ylim = c(0,4000), main = 'Monthly mean post-dam')
#plotting monthly magnitude as median
par(mfrow=c(1,2))
boxplot(Monthly_pre_med, ylab = 'Monthly magnitude (cfs)', ylim = c(0,3000), main = 'Monthly median pre-dam')
boxplot(Monthly_post_med, ylab = 'Monthly magnitude (cfs)', ylim = c(0,3000), main = 'Monthly median post-dam')
#----IHA parameter #2: ---------------------------------------------------------------------------------
pre2 <- group2(DRpre_z)
post2 <- group2(DRpost_z)
pre2_max <- select(pre2, 3,5,7,9,11)
post2_max <- select(post2, 3,5,7,9,11)
boxplot(pre2_max, pre2_max, ylab = 'Flow (cfs)', col = 'blue')
title(main = "Max Flow Pre Dam")
boxplot(post_g2_max, post_g2_max, ylab = 'Flow (cfs)', col = 'red')
title(main = "Max Flow Post Dam")
colnames(DRflow_pre) <- c('Agency', 'Site', 'Date', 'Flow', 'Code')
colnames(DRflow_post) <- c('Agency', 'Site', 'Date', 'Flow', 'Code')
#plotting flow pre and post dam
par(mfrow=c(1,2)) #creates 2 windows side-by-side for the plots to be shown
plot(DRflow_pre$Date, DRflow_pre$Flow, type = 'l', col = 'red', ylim = c(0,20000))
plot(DRflow_post$Date, DRflow_post$Flow, type = 'l', col = 'blue', ylim = c(0,20000))
colnames(DRflow_pre) <- c('Agency', 'Site', 'Date', 'Flow', 'Code')
colnames(DRflow_post) <- c('Agency', 'Site', 'Date', 'Flow', 'Code')
#plotting flow pre and post dam
par(mfrow=c(1,2)) #creates 2 windows side-by-side for the plots to be shown
plot(DRflow_pre$Date, DRflow_pre$Flow, type = 'l', col = 'red', ylim = c(0,20000))
plot(DRflow_post$Date, DRflow_post$Flow, type = 'l', col = 'blue', ylim = c(0,20000))
colnames(DRflow_pre) <- c('Agency', 'Site', 'Date', 'Flow', 'Code')
colnames(DRflow_post) <- c('Agency', 'Site', 'Date', 'Flow', 'Code')
#plotting flow pre and post dam
par(mfrow=c(1,2)) #creates 2 windows side-by-side for the plots to be shown
plot(DRflow_pre$Date, DRflow_pre$Flow, type = 'l', col = 'red', ylim = c(0,20000))
plot(DRflow_post$Date, DRflow_post$Flow, type = 'l', col = 'blue', ylim = c(0,20000))
colnames(DRflow_pre) <- c('Agency', 'Site', 'Date', 'Flow', 'Code')
colnames(DRflow_post) <- c('Agency', 'Site', 'Date', 'Flow', 'Code')
#plotting flow pre and post dam
par(mfrow=c(1,2)) #creates 2 windows side-by-side for the plots to be shown
plot(DRflow_pre$Date, DRflow_pre$Flow, type = 'l', col = 'red', ylim = c(0,20000))
plot(DRflow_post$Date, DRflow_post$Flow, type = 'l', col = 'blue', ylim = c(0,20000))
colnames(DRflow_pre) <- c('Agency', 'Site', 'Date', 'Flow', 'Code')
colnames(DRflow_post) <- c('Agency', 'Site', 'Date', 'Flow', 'Code')
#plotting flow pre and post dam
par(mfrow=c(1,2)) #creates 2 windows side-by-side for the plots to be shown
plot(DRflow_pre$Date, DRflow_pre$Flow, type = 'l', col = 'red', ylim = c(0,20000))
plot(DRflow_post$Date, DRflow_post$Flow, type = 'l', col = 'blue', ylim = c(0,20000))
