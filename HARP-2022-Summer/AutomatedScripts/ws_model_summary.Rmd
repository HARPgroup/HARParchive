---
date: "`r format(Sys.time(), '%m/%d/%Y')`"
author: ""
title: "`r params$doc_title`"
output: 
  officedown::rdocx_document:
    mapstyles:
      Normal: ['First Paragraph']
    page_margins:
      bottom: 0.5
      top: 0.5
      right: 1
      left: 0.0
      header: 0.0
      footer: 0.0
params: 
  doc_title: "Comparison of Two VaHydro Models"
  summary_text: ''
  
  id1: 67924  #hydroid !
  ftype1: ''
  model1: ''
  scenario1: ''
  
  id2: ''  #hydroid !
  ftype2: ''
  model2: ''
  scenario2: ''
---

```{r setup, include=FALSE}
#library("dataRetrieval")
#library("zoo")
library("hydrotools")
#library("data.table")
#library("flextable")          uncomment when packages get used just to make sure no extras from previous gage situation

library("jsonlite")
basepath='/var/www/R'
source('/var/www/R/config.R')
ds <- RomDataSource$new("http://deq1.bse.vt.edu/d.dh", rest_uname)
ds$get_token(rest_pw)

summary_text <- params$summary_text

id1 <- params$id1
ftype1 <- params$ftype1
model1 <- params$model1
scenario1 <- params$scenario1

id22 <- params$id2
ftype2 <- params$ftype2
model2 <- params$model2
scenario2 <- params$scenario2
```

```{r getdata, include=FALSE}

id1 <- 67924
model1 <- RomProperty$new(
          ds,
          list(entity_type='dh_feature', featureid = id1, propcode="cbp-6.0"),
          TRUE
          )

json_obj_url <- paste(site, 'node/62', sep="/")
site = "http://deq1.bse.vt.edu:81/d.dh"
obj_url <- paste(json_obj_url, model1$pid, sep="/")
model1_info <- ds$auth_read(obj_url, "text/json", "")
model1_info <- fromJSON(model1_info)

scenario1_l90_Qout <- model_info[[1]]$hsp2_2022$l90_Qout$value
```